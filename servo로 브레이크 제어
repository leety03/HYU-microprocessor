#include <Arduino.h>

#define SERVO_PIN 3  

void setup() {
  pinMode(SERVO_PIN, OUTPUT); 

  Serial.begin(9600);

  TCCR2A = (1 << WGM21) | (1 << WGM20) | (1 << COM2B1);
  TCCR2B = (1 << CS21) | (1 << CS22); 

}

int tick_calc(int x0, int x1, int y0, int y1, int x) {
  return y0 + ((x - x0) * (y1 - y0))/ (x1 - x0);
}

void loop() {
  int tick0 = 33;
  int tick180 = 143;

  int angles[] = {0, 30, 60, 90, 120, 150, 180};

  for (int i = 0; i < 7; i++) {
    int angle = angles[i];
    int desired_tick = tick_calc(0, 180, tick0, tick180, angle);

    Serial.print("Angle: ");
    Serial.print(angle);
    Serial.print(" degrees, Tick: ");
    Serial.println(desired_tick);

    OCR2B = desired_tick;

    delay(1500);
  }
} 
